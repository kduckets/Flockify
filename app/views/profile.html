<div class="container" ng-show="loading" align="center" flex ng-cloak>
   <md-progress-circular md-mode='indeterminate' md-diameter="100"></md-progress-circular>
</div>

<div class="container" ng-show="user && !loading">

 
   <!--  <div class="col-sm-1">
      <img ng-src="http://www.gravatar.com/avatar/{{ profile.md5_hash }}" class="prof-img" />
    </div> -->

    <div align="center">
      <span ng-show="view_tab == 'tabA'" class="name">Posts by {{ profile.username }}
       <!--  <img src="/images/poop.gif" style="padding-bottom:10px" ng-show="profile.username  == 'Nrblanks' || profile.username  == 'Stevie' || profile.username == 'davidemerritt' || profile.username == 'Oat'" height="60px"/>

        <img src="/images/gold-record.png" style="padding-bottom:4px; padding-left:2px" ng-show="profile.username == 'sparker'" height="60px"/> -->

        </span>
        <span ng-show="view_tab == 'tabB'" class="name">Likes by {{ profile.username }}
         <!--   <img src="/images/poop.gif" style="padding-bottom:10px" ng-show="profile.username  == 'Nrblanks' || profile.username  == 'Stevie' || profile.username == 'davidemerritt' || profile.username == 'Oat'" height="60px"/>

        <img src="/images/gold-record.png" style="padding-bottom:4px; padding-left:2px" ng-show="profile.username == 'sparker'" height="60px"/> -->
        </span>
          <span ng-show="view_tab == 'tabC'" class="name">Queue for {{ profile.username }}
            <!--  <img src="/images/poop.gif" style="padding-bottom:10px" ng-show="profile.username  == 'Nrblanks' || profile.username  == 'Stevie' || profile.username == 'davidemerritt' || profile.username == 'Oat'" height="60px"/>
        <img src="/images/gold-record.png" style="padding-bottom:4px; padding-left:2px" ng-show="profile.username == 'sparker'" height="60px"/> -->
          </span>


     <div> <img ng-repeat="i in getNumber(stars) track by $index" ng-src="/images/gold-star.png" height="18" /></div>
     <br/>
  <small>weekly score: {{score}} | weekly ratio: <a href="" ng-click="showRatio()" ng-show="!ratio">show</a><span ng-show="ratio">{{ratio | limitTo: 3}}</span></small>

</div>

<md-tabs md-center-tabs="true" md-dynamic-height md-border-bottom>
        <md-tab label="Posts" ng-class="{'active': view_tab == 'tabA'}" ng-click="changeTab('tabA')" >
        </md-tab>
        <md-tab label="Likes" ng-class="{'active': view_tab == 'tabB'}" ng-click="changeTab('tabB');getLikes()" >
        </md-tab>
        <md-tab label="Queue" ng-class="{'active': view_tab == 'tabC'}" ng-click="changeTab('tabC');getQueue()" >
        </md-tab>
        </md-tabs>

        <br/>

<div ng-repeat="(key,post) in user_posts" ng-show="view_tab == 'tabA' " align="center" >
 <div class="post">
  
  <a ng-href="#/posts/{{ post.$id  }}">
    <img ng-src="{{post.image_medium}}" height="100" />
  </a>

  <br/>
  <a ng-href="#/posts/{{ post.$id  }}">
    {{post.media_info.artist}} - {{ post.media_info.album }} ({{post.media_info.release_date | limitTo: 4}})
  </a>
  <div>
   <!-- <a data-toggle="modal" ng-click="starPost(post)" href="" >   -->
   <img ng-repeat="i in getNumber(post.stars) track by $index" ng-src="/images/gold-star.png" height="18" />
   <!--      <img ng-src="/images/empty-star.png" height="18" /></a> -->

 </div>
 <div>
  <span class="label label-pill label-info">{{ post.media_info.summary | limitTo: 40 }}{{post.media_info.summary.length > 40 ? '..' : ''}}</span>
</div>
<p>
 {{ post.score }} votes
 <small>(posted by {{post.creator_name}})</small>
 
 <small><a ng-href="#/posts/{{ post.$id  }}">comments ({{ getNumKeys(post.comments) }})</a></small>
 <small><a href="" ng-click="deletePost(post)" ng-show="user.uid === post.creatorUID">&mdash; delete</a></small>
</p>
</div>
</div>



<div ng-repeat="post in likes" ng-show="view_tab == 'tabB'" align="center">

 <div class="post">
  
   
  <a ng-href="#/posts/{{ post.$id  }}">
    <img ng-src="{{post.image_medium}}" height="100" />
  </a>
  
  

  <br/>
  <a ng-href="#/posts/{{ post.$id  }}">
    {{post.media_info.artist}} - {{ post.media_info.album }} ({{post.media_info.release_date | limitTo: 4}})
  </a>
  <div>
    <img ng-repeat="i in getNumber(post.stars) track by $index" ng-src="/images/gold-star.png" height="18" />
    </div>
    <div>
    <!--      <img ng-src="/images/empty-star.png" height="18" /></a> -->
    <span class="label label-pill label-info">{{ post.media_info.summary | limitTo: 40 }}{{post.media_info.summary.length > 40 ? '..' : ''}}
    </span>
    <p>
     {{ post.score }} votes
     <small>(posted by <a ng-href="#/users/{{ post.creatorUID }}">{{post.creator_name}}</a>)</small>
     
     <small><a ng-href="#/posts/{{ post.$id  }}">comments ({{ getNumKeys(post.comments) }})</a></small>
     <small><a href="" ng-click="deletePost(post)" ng-show="user.uid === post.creatorUID">&mdash; delete</a></small>
   </p>
 </div>
 
</div>

</div>

<div ng-repeat="post in queue" ng-show="view_tab == 'tabC'" align="center">
<md-card class="card" flex="65" hide-xs hide-sm>

        <div layout-xs="column" layout="row">

          <div flex="40">
            <a ng-href="#/albums/{{post.$id}}">

              <img class="md-card-image" ng-src="{{post.image_medium}}" /></a>
          </div>
          <div flex="50">
            <md-card-title>
              <md-card-title-text>
                <a ng-href="#/albums/{{post.$id}}">
   <span class="md-headline"><b>{{ post.media_info.artist }}</b><br/>
 {{ post.media_info.album | limitTo: 22 }}{{post.media_info.album.length > 22 ? '..' : ''}} ({{post.media_info.release_date | limitTo: 4}})</span></a>
                <div>
                  <img ng-repeat="i in getNumber(post.stars) track by $index" ng-src="/images/gold-star.png" class="star" />
                  <a href="" ng-click="starPost(post)">
                    <img ng-src="/images/empty-star.png" class="star" /></a>
                </div>
              </md-card-title-text>


            </md-card-title>
            <md-card-content>
              <div hide-sm>{{ post.media_info.summary| limitTo: 132 }}{{post.media_info.summary.length > 132 ? '..' : ''}}</div>
              <div show-sm hide-gt-sm> {{ post.media_info.summary| limitTo: 32 }}{{post.media_info.summary.length > 32 ? '..' : ''}}</div>

              <div layout="row" layout-align="center center">
                <md-chips class="tag-chip"  ng-model="post.tags"  readonly="true">
                  <md-chip-template>
                    <a href="" ng-click="filterByTag($chip.name)">
        <span>
          <small>{{$chip.name | lowercase}}</small>
        </span>
                    </a>
                  </md-chip-template>
                </md-chips>
              </div>

     <span class="md-subhead"><small><b>posted by <a ng-href="#/users/{{ post.creator_id }}">{{ post.creator_name }}

       <!--    <img src="/images/poop.gif" style="padding-bottom:10px; padding-left:2px; height: 50px; width: auto;  display:inline-block;" ng-show="user.profile.group_id == 1 && post.creator == 'Nrblanks' || post.creator == 'Stevie' || post.creator == 'davidemerritt' || post.creator == 'Oat'"height="50px"/><img src="/images/gold-record.png" style="padding-bottom:4px; padding-left:2px;height: 30px; width: auto;display:inline-block;" ng-show="user.profile.group_id == 1 && post.creator == 'sparker'"/> -->

     </b>
       </a> <i>{{ post.created_ts | timeAgo}}</i></small></span>
       <p><small><button class="btn btn-success-outline btn-sm" ng-click="removeSaved(post)" data-toggle="modal" data-target=".bd-example-modal-sm">remove from my queue</button></small></p> 
            </md-card-content>
          </div>

          <div flex="10">
            <md-card-actions layout="column" layout-align="end center" style="position:relative;right:0;bottom:0;">
              <md-button class="md-fab md-raised md-hue-1" style=" z-index:1"><b style="font-size:22pt">{{ post.score }}</b> </md-button>


              <md-button class="md-icon-button" ng-click="save(post)" aria-label="Save" >
                <ng-md-icon icon="save" class="arrow" size="32"></ng-md-icon>
              </md-button>

              <md-button class="md-icon-button" ng-click="upvote(post)" aria-label="Upvote" >
                <ng-md-icon icon="arrow_upwards" class="arrow" size="32"></ng-md-icon>
              </md-button>
              <md-button class="md-icon-button" ng-click="downvote(post)" aria-label="Downvote" >
                <ng-md-icon icon="arrow_downward" class="arrow" size="32"></ng-md-icon>
              </md-button>

              <md-button style="top:11px; left:2px; overflow:visible !important;" ng-href="#/albums/{{post.$id}}" aria-label="Comments" >
  <span class="comments-icon-big"><ng-md-icon icon="chat_bubble" class="arrow" size="34"></ng-md-icon>
  <span class="after label label-pill label-danger">{{post.comments}}</span></span>
              </md-button>
 
            </md-card-actions>
          </div>


        </div>

      </md-card>
   


</div> 


</div>

</div>
</div>